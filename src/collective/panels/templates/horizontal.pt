<div class="row"
     tal:define="portlets portlets | python: (1, 2, 3, '&rarr;');
                 spacing spacing | python: 1.125"
     tal:condition="portlets">
  <tal:loop tal:define="ratio python: round((100.0 + ((spacing - 1.125)* 2)) / len(portlets), 3);
                        width python: ratio - spacing * 2"
            tal:repeat="portlet portlets">
    <div class="cell"
         tal:define="index repeat/portlet/index;
                     position python: -100.0 + ratio * index + 1.125"
         tal:attributes="style string:width: ${width}%;; margin-left: ${position}%">
      <div tal:attributes="class string:content portlet-${index}"
           tal:content="structure portlet" />
    </div>
  </tal:loop>
</div>
