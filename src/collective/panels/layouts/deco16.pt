<div class="row" tal:condition="portlets">
  <tal:thirds condition="python: len(portlets) == 3">
    <div tal:repeat="portlet portlets"
         tal:attributes="class string:cell position-0 position-${repeat/portlet/index}:3 width-1:3"
         tal:content="structure portlet/render"
         />
  </tal:thirds>
  <tal:conforms condition="python: 16 % len(portlets) == 0">
    <div tal:define="size python: 16 // len(portlets)"
         tal:repeat="portlet portlets"
         tal:attributes="class string:cell position-${python: size * repeat['portlet'].index} width-${size}"
         tal:content="structure portlet/render"
         />
  </tal:conforms>
</div>
